var list=$(".filter-tabs-main nav div a");$.each(list,function(){$(this).removeClass("waves-effect waves-light")}),$("#contact_submit").submit(function(e){e.preventDefault();var t=$("#username").val(),a=$("#useremail").val(),o=$("#usermobile").val(),n=$("#userMessage").val();$.ajax({type:"post",url:"/api/contact-mail",data:{name:t,email:a,usermobile:o,userMessage:n},headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(e){"success"==e[0]&&(toastr.success("Success! Email Sent."),$("#get-in-touch-modal").modal("hide"),$("#username").val(""),$("#useremail").val(""),$("#usermobile").val(""),$("#userMessage").val(""))},error:function(e){toastr.error("Kindly fill the form carefully.")}})});var formatter=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}),areaFormatter=new Intl.NumberFormat("en-US",{style:"decimal",minimumFractionDigits:0,maximumFractionDigits:0});function calculatePayment(){var e=document.getElementById("amount").value;e=e.replace(/[|&;$%@"<>()+,]/g,"");var t=document.getElementById("term").value,a=document.getElementById("rate").value,o=document.getElementById("downpay_amt").value;o=o.replace(/[|&;$%@"<>()+,]/g,""),t=t.match("y")?12*parseInt(t.replace(/[^\d.]/gi,""),10):parseInt(t.replace(/[^\d.]/gi,""),10);var n=e-o,i=a/100/12,s=Math.pow(1+i,t),l=n*s*i/(s-1),r="$"+Math.round(l);document.getElementById("payment").innerHTML=r,document.getElementById("payments").innerHTML=r;var d=document.getElementById("downpay_amt").value;d=d.replace(/[|&;$%@"<>()+,]/g,"");var m=l*t+parseInt(d),c="$"+Math.round(m);document.getElementById("paymentss").innerHTML=c}function downrate(){var e=document.getElementById("amount").value,t=(e=e.replace(/[|&;$%@"<>()+,]/g,""))*document.getElementById("downpay_rate").value/100;document.getElementById("downpay_amt").value=t,calculatePayment()}function downpayment(){var e=document.getElementById("amount").value;e=e.replace(/[|&;$%@"<>()+,]/g,"");var t=document.getElementById("downpay_amt").value,a=(100*(t=t.replace(/[|&;$%@"<>()+,]/g,""))/e).toFixed(0);document.getElementById("downpay_rate").value=a,calculatePayment()}sessionStorage.getItem("hide-welcome-message")||$("#feature-tour-message").fadeIn(),$("#feature-tour-button").mouseenter(function(){$("#feature-tour-message").fadeOut(),sessionStorage.setItem("hide-welcome-message",!0)}),$(".brochure-image-wrapper").lightGallery({thumbnail:!0,animateThumb:!0,showThumbByDefault:!1,mode:"lg-slide-circular"});var brochure=$(".brochure-image-wrapper");brochure.lightGallery(),brochure.on("onBeforeSlide.lg",function(e,t,a){$(".inner-sliding-modal").modal("hide")}),$(".floor-map-img-main").lightGallery({thumbnail:!0,animateThumb:!0,showThumbByDefault:!1});var floor=$(".floor-map-img-main");floor.lightGallery(),floor.on("onBeforeSlide.lg",function(e,t,a){$(".lg-outer").css("background-color","rgba(255,255,255,0.9)")});var tabsCarousel=$(".carousel-gallery");tabsCarousel.lightGallery({thumbnail:!0,animateThumb:!1,showThumbByDefault:!1,mode:"lg-slide-circular"}),tabsCarousel.slick({infinite:!0,speed:500,fade:!0,cssEase:"linear",dots:!1,arrows:!0,autoplay:!0,adaptiveHeight:!0});var propertyModalCarousel=$(".property-image");if($(".inner-sliding-modal").on("show.bs.modal",function(){$(".inner-sliding-modal").not(this).modal("hide")}),$("#property-modal").on("show.bs.modal",function(){propertyModalCarousel.slick("unslick").slick("reinit").slick()}),$(".inner-sliding-modal").on("hidden.bs.modal",function(){$("body").addClass("modal-open")}),$(".inner-sliding-modal .modal-dialog.modal-notify .modal-body .brochure-image-wrapper img, .inner-sliding-modal .modal-dialog.modal-notify .modal-body .brochure-image-wrapper a .middle").mouseover(function(){$(".inner-sliding-modal .modal-dialog.modal-notify .modal-body .brochure-image-wrapper a .middle").addClass("middle-show"),$(".inner-sliding-modal .modal-dialog.modal-notify .modal-body .brochure-image-wrapper img").addClass("img-fade")}),$(".inner-sliding-modal .modal-dialog.modal-notify .modal-body .brochure-image-wrapper img").mouseout(function(){$(".inner-sliding-modal .modal-dialog.modal-notify .modal-body .brochure-image-wrapper a .middle").removeClass("middle-show"),$(".inner-sliding-modal .modal-dialog.modal-notify .modal-body .brochure-image-wrapper img").removeClass("img-fade")}),$("#property-modal .floor-map-img-main img, .inner-sliding-modal .modal-dialog.modal-notify .modal-body .middle").mouseenter(function(){$(".inner-sliding-modal .modal-dialog.modal-notify .modal-body .middle").addClass("middle-show"),$("#property-modal .floor-map-img-main img").addClass("img-fade")}),$("#property-modal .floor-map-img-main img").mouseout(function(){$(".inner-sliding-modal .modal-dialog.modal-notify .modal-body .middle").removeClass("middle-show"),$("#property-modal .floor-map-img-main img").removeClass("img-fade")}),$("#tray-menu .right-arrow").click(function(){$(".tray-menu-buttons").toggleClass("tray-menu-buttons-show"),$("#tray-menu").toggleClass("w-95"),$(this).toggleClass("rotate-arrow")}),$(".footer .close-arrow").click(function(){$(".footer .footer-btns").toggleClass("hide-footer-btns"),$(".footer").toggleClass("close-footer"),$(".footer .close-arrow span").toggleClass("rotate-arrow")}),propertyModalCarousel.lightGallery({thumbnail:!0,animateThumb:!1,showThumbByDefault:!1,mode:"lg-slide-circular"}),propertyModalCarousel.slick({infinite:!0,speed:500,fade:!0,cssEase:"linear"}),propertyModalCarousel.on("onBeforeSlide.lg",function(e,t,a){$(".inner-sliding-modal").modal("hide")}),"xplat"==currentRoute||"plat"==currentRoute){var filter_lot_id,counter=0,scale=1;function setPayment(){var e=parseInt(document.getElementById("slot_id").value)+parseInt(document.getElementById("shome_id").value);document.getElementById("amount").value=e,document.getElementById("amount_display").innerHTML=formatter.format(e),downrate()}function showPopup(){var e=document.getElementById("lotInfoOnHover");$("g").mouseover(function(){var t=$(this).attr("legend-alias");if(void 0!==t&&!1!==t){var a=$(this).attr("legend-alias"),o=$(this).attr("legend-name"),n=$(this).attr("data-price"),i=this.getBoundingClientRect();e.style.left=i.right+"px",e.style.top=window.scrollY+i.top-140+"px",e.style.display="block",e.style.width="140px",e.style.height="90px",$(".alias").text("Lot No "+a),"sold"!=o.toLowerCase()&&"model"!=o.toLowerCase()&&n>=1?$(".price").text("Price : "+formatter.format(n)):$(".price").text(""),$(".status").text("Status: "+o)}}),$("g").mouseout(function(){e.style.display="none"})}function resetColors(e){$("svg").find("g").find(".blue").removeClass("blue")}function loadSvg(){$(".svg-draggable svg").find("g path").css({fill:"rgb(119, 120, 123)",stroke:"#fff"}),$(".svg-draggable svg").find("g polygon").css({fill:"rgb(119, 120, 123)",stroke:"#fff"}),$.ajax({url:"/api/get-lots",type:"post",dataType:"json",data:{pid:plotId},headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(e){$.each(e.lots,function(e,t){$("svg").find("g#"+t.groupID).attr("data-pid",t.plot_id).attr("data-lid",t.id).attr("data-legend",t.legend_id).attr("data-price",t.price).attr("font-size","8").attr("legend-name",t.name).attr("legend-alias",t.alias).attr("lot_connected",!1),$("svg").find("g#"+t.groupID+" text.st1.st2").text(t.alias),$("svg").find("g#"+t.groupID+" text.st4.st20").text(t.alias)}),$.each(e.connected_lots,function(e,t){$("svg").find("g#"+t.groupID).attr("lot_connected",!0),$("svg").find("g#"+t.groupID+" path").css("fill",t.colorcode),$("svg").find("g#"+t.groupID+" polygon").css("fill",t.colorcode)}),$(".svgloader").fadeOut(250)}}),$.ajax({url:"/api/setlotcount",type:"post",dataType:"json",data:{cid:communityId},headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(e){$(".legend-list").html(e.html)}}),$(document).on("click",".sb-listings-more",function(){var e=$(this).data("lotid");resetColors(e),$("#nav-tab1, #nav-tab2, #nav-tab3").removeClass("active"),$("#nav1, #nav2, #nav3").removeClass("active show"),$("#nav-tab4").addClass("active"),$("#nav4").addClass("active show"),$("#search-results").html("fetching home details...."),e&&($("#"+e+" path").addClass("blue"),$("#"+e+" polygon").addClass("blue"));var t=$(this).data("pid");$("#continue_to_home").attr("data-lid",t),$("#generate_estimate").attr("data-lid",t),$("#slotp").html(formatter.format($(this).data("price"))),$("#slot_id").val($(this).data("price")),setPayment(),$.ajax({url:"/xplat/search",type:"get",dataType:"json",data:{lid:t},headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(e){$("#search-results").html(e.html),$(".lot-no").html($(this).attr("legend-alias")),$(".home-img").mouseenter(function(){$(this).find("span").addClass("show-buttons"),$(this).find("img").addClass("fade-img")}),$(".home-img").not(".home-img span").mouseleave(function(){$(this).find("span").removeClass("show-buttons"),$(this).find("img").removeClass("fade-img")})}})}),$(".svg-draggable svg").find("g").click(function(){openNav();var e=$(this).attr("legend-name"),t=$(this).attr("lot_connected"),a=$(this).attr("id");filter_lot_id=$(this).attr("data-lid"),resetColors(a),$("#nav-tab1, #nav-tab2, #nav-tab3").removeClass("active"),$("#nav1, #nav2, #nav3").removeClass("active show"),$("#nav-tab4").addClass("active"),$("#nav4").addClass("active show"),"available"==e.toLowerCase()&&"true"==t&&a&&($("#"+a+" path").addClass("blue"),$("#"+a+" polygon").addClass("blue")),$("#search-results").html("fetching home details....");var o=$(this).data("lid");"available"==e.toLowerCase()&&"true"==t?($("#continue_to_home").attr("data-lid",o),$("#generate_estimate").attr("data-lid",o),$("#pb-lot").addClass("complete"),$("#pb-lot span").html("done")):($("#continue_to_home").attr("data-lid",""),$("#generate_estimate").attr("data-lid",""),$("#pb-lot").removeClass("complete"),$("#pb-lot span").html("place")),$("#lotInfoOnHover").hide(),$("#searchImage-tab").trigger("click"),$("#search-results").html('<p class="text-center text-white m-3"><img src="/images/white-loader.gif"></p>'),"available"==e.toLowerCase()&&($("#slotp").html(formatter.format($(this).data("price"))),$("#slot_id").val($(this).data("price")),setPayment()),$.ajax({url:"/xplat/search",type:"get",dataType:"json",data:{lid:o},headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(e){$("#search-results").html(e.html),$("#continue_to_home").attr("data-hid"," "),$("#continue_to_home").attr("data-link",""),$(".home-img").mouseenter(function(){$(this).find("span").addClass("show-buttons"),$(this).find("img").addClass("fade-img")}),$(".home-img").not(".home-img span").mouseleave(function(){$(this).find("span").removeClass("show-buttons"),$(this).find("img").removeClass("fade-img")})}}),sessionStorage.getItem("hide-estimate-message")||$(".estimate-message").fadeIn(),$("#generate_estimate").mouseenter(function(){$(".estimate-message").fadeOut(),sessionStorage.setItem("hide-estimate-message",!0)})})}function homePopup(e,t){$(".inner-sliding-modal").modal("hide"),$(".svgloader").show(),$("#property-modal .modal-body").hide(),$("#property-modal").modal("show"),openNav(),$.ajax({url:"/api/sethomeform",type:"post",dataType:"json",data:{lid:e,hid:t},headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(e){$("#property-modal .modal-dialog.modal-notify.modal-info .modal-body h4").html(`${e.title}\n                    <span class="lot-no" style="position: absolute;top: 4px;right: 0;font-size: 14px;font-weight: 500;">\n                    ${e.linfo}\n                    </span>`),$(".property-image").html("");var t=$(".property-image");$.each(e.gallery,function(){t.append(`<a href="/uploads/homes/${this}">\n                                            <img src="/uploads/homes/${this}"/>\n                                        </a>`),t.lightGallery(),t.data("lightGallery").destroy(!0),t.lightGallery({thumbnail:!0,animateThumb:!1,showThumbByDefault:!1,mode:"lg-slide-circular"})}),t.slick("slickRemove",null,null,!0),t.slick("unslick"),t.slick({infinite:!0,speed:500,fade:!0,cssEase:"linear"}),e.floor_data.length>0?$("#property-modal .modal-body .row div .tab-content").html(""):$("#property-modal .modal-body .row div .tab-content").html('<div class="alert alert-info" role="alert">\n                                                                                Floor Plans Coming Soon!.\n                                                                                </div>');var a="";$.each(e.floor_data,function(e){var t;0==e?(a+=`<li class="nav-item waves-effect waves-light">\n                                    <a class="nav-link active" data-toggle="tab" href="#floor_plan${this.id}">${this.title}</a>\n                                </li>`,$("#property-modal .modal-body .row div .tab-content").append(`<div class="tab-pane active h-100" id="floor_plan${this.id}">\n                                    <div class="floor-map-img-main">\n                                    <a href="/uploads/floors/${this.image}">\n                                        <img src="/uploads/floors/${this.image}" alt="">\n                                        <div class="middle">\n                                            <div class="text">View</div>\n                                        </div>\n                                        </a>\n                                    </div>\n                                </div>`),(t=$(".floor-map-img-main")).lightGallery(),t.data("lightGallery").destroy(!0),t.lightGallery({thumbnail:!1})):(a+=`<li class="nav-item waves-effect waves-light">\n                                    <a class="nav-link" data-toggle="tab" href="#floor_plan${this.id}">${this.title}</a>\n                                </li>`,$("#property-modal .modal-body .row div .tab-content").append(`<div class="tab-pane h-100" id="floor_plan${this.id}">\n                                    <div class="floor-map-img-main">\n                                    <a href="/uploads/floors/${this.image}">\n                                        <img src="/uploads/floors/${this.image}" alt="">\n                                        <div class="middle">\n                                            <div class="text">View</div>\n                                        </div>\n                                        </a>\n                                    </div>\n                                </div>`),(t=$(".floor-map-img-main")).lightGallery(),t.data("lightGallery").destroy(!0),t.lightGallery({thumbnail:!1}),t.on("onBeforeSlide.lg",function(e,t,a){$(".lg-outer").css("background-color","rgba(255,255,255,0.9)")}))}),$("#property-modal .modal-body .row div ul").html(a),$("#hname").html("Selected Home<br><b>"+e.title+"</b>"),$("#property-modal .property-info p.home-price").html(formatter.format(e.price)),$("#property-modal .property-info p.bed").html(e.bed),$("#property-modal .property-info p.bath").html(e.bath),$("#property-modal .property-info p.garage").html(e.garg),$("#property-modal .property-info p.floor").html(e.floor),$("#property-modal .property-info p.area").html(`${areaFormatter.format(e.area)} sqft`),$("#property-modal .modal-dialog.modal-notify.modal-info .modal-body h4 span.lot-no").html(e.linfo),$(".svgloader").hide(),$("#property-modal .modal-body").show()}})}function disableLots(e,t){openNav(),$(".svg-draggable svg").find("g path").css({fill:"rgb(119, 120, 123)",stroke:"#fff"}),$(".svg-draggable svg").find("g polygon").css({fill:"rgb(119, 120, 123)",stroke:"#fff"}),$.ajax({url:"/api/disable-lots",type:"post",dataType:"json",data:{pid:plotId,home_id:t},headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(e){var t="";$.each(e.home_types,function(){t+=`<div class="search-single available-img-box shuffle-item shuffle-item--hidden d-block \n                                align-items-center pt-3 pl-3 pr-3 pb-2 m-0 border-bottom "> \n                                <div class="home-img">\n                                    <img src="/uploads/homes/${this.img}" alt="${this.title}" class="w-100">\n                                    <span class="text-dark">\n                                        <svg class="check-home-type" data-id="${this.id}" data-title="${this.title}" xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-check-circle"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg>\n                                    </span>\n                                </div>\n                                <p class="m-0 mt-2 home-data-wrap text-left">\n                                    <span style="color:#3a3b3d;">${this.title}</span>\n                                    <span class="d-block" style="color:#3a3b3d;">${formatter.format(this.price)}</span>\n                                    <span class="d-flex justify-content-between home-icons mt-2">\n                                        <span style="color:#3a3b3d;">\n                                            <span style="color:#3a3b3d;" class="material-icons mr-1">\n                                            king_bed\n                                            </span>\n                                            ${this.bedroom} Beds\n                                        </span>\n                                        <span style="color:#3a3b3d;">\n                                            <span style="color:#3a3b3d;" class="material-icons mr-1">\n                                            bathtub\n                                            </span>\n                                            ${this.bathroom} Baths\n                                        </span>\n                                        <span style="color:#3a3b3d;">\n                                            <span style="color:#3a3b3d;" class="material-icons mr-1">\n                                            drive_eta\n                                            </span>\n                                            ${this.garage} Garages\n                                        </span>\n                                    </span>\n                                </p>                            \n                            </div>`}),$("#elevation-type-modal .modal-body").html(t),$(".home-img").mouseenter(function(){$(this).find("span").addClass("show-buttons"),$(this).find("img").addClass("fade-img")}),$(".home-img").not(".home-img span").mouseleave(function(){$(this).find("span").removeClass("show-buttons"),$(this).find("img").removeClass("fade-img")}),$("#continue_to_home").attr("href",e.home_link),$("#elevation-type-modal").modal("show"),$(".check-home-type").click(function(){var e=$(this).attr("data-id"),t=$(this).attr("data-title");$.ajax({url:"/api/select-elevation-type",type:"post",data:{home_type_id:e},headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(e){$(document).find(".home-type-title").html(`- ${t}`),$(document).find(".home-type-title-mortgage").html(`- ${t}`),$("#elevation-type-modal").modal("hide"),$("#shmprice").html(formatter.format(e.home_price)),$("#shome_id").val(e.home_price),$("#amount_display").html(formatter.format(e.total_price)),$("#amount").val(e.total_price),$("#continue_to_home").attr("href",e.home_link),setPayment()}})}),$.each(e.lots,function(e,t){$("svg").find("g#"+t.groupID).attr("data-pid",t.plot_id).attr("data-lid",t.id).attr("data-legend",t.legend_id).attr("data-price",t.price).attr("font-size","8").attr("legend-name",t.name).attr("legend-alias",t.alias).attr("lot_connected",!1),$("svg").find("g#"+t.groupID+" text.st1.st2").text(t.alias),$("svg").find("g#"+t.groupID+" text.st4.st20").text(t.alias)}),$.each(e.connected_lots,function(e,t){$("svg").find("g#"+t.groupID).attr("lot_connected",!0),$("svg").find("g#"+t.groupID+" path").css("fill",t.colorcode),$("svg").find("g#"+t.groupID+" polygon").css("fill",t.colorcode)}),$(".footer .footer-title h6").html(`<span class="material-icons">home</span> ${e.title} <span class="m-0 home-type-title" style="position:unset; color:#1f223e;"></span>`),$("#shmprice").html(formatter.format(e.price)),$("#shome_id").val(e.price),$("#shome").html(`${e.title} <span class="m-0 home-type-title-mortgage"></span>`),setPayment()}}),$.ajax({url:"/api/sethomeform",type:"post",dataType:"json",data:{lid:e,hid:t},headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(e){$("#property-modal .modal-dialog.modal-notify.modal-info .modal-body h4").html(`${e.title} <span class="m-0 home-type-title"></span>\n                    <span class="lot-no" style="position: absolute;top: 4px;right: 0;font-size: 14px;font-weight: 500;">\n                    ${e.linfo}\n                    </span>`),$(".property-image").html("");var t=$(".property-image");$.each(e.gallery,function(){t.append(`<a href="/uploads/homes/${this}">\n                                            <img src="/uploads/homes/${this}"/>\n                                        </a>`),t.lightGallery(),t.data("lightGallery").destroy(!0),t.lightGallery({thumbnail:!0,animateThumb:!1,showThumbByDefault:!1,mode:"lg-slide-circular"})}),t.slick("slickRemove",null,null,!0),t.slick("unslick"),t.slick({infinite:!0,speed:500,fade:!0,cssEase:"linear"}),e.floor_data.length>0?$("#property-modal .modal-body .row div .tab-content").html(""):$("#property-modal .modal-body .row div .tab-content").html('<div class="alert alert-info" role="alert">\n                                                                                Floor Plans Coming Soon!.\n                                                                                </div>');var a="";$.each(e.floor_data,function(e){var t;0==e?(a+=`<li class="nav-item waves-effect waves-light">\n                                    <a class="nav-link active" data-toggle="tab" href="#floor_plan${this.id}">${this.title}</a>\n                                </li>`,$("#property-modal .modal-body .row div .tab-content").append(`<div class="tab-pane active h-100" id="floor_plan${this.id}">\n                                    <div class="floor-map-img-main">\n                                    <a href="/uploads/floors/${this.image}">\n                                        <img src="/uploads/floors/${this.image}" alt="">\n                                        <div class="middle">\n                                            <div class="text">View</div>\n                                        </div>\n                                        </a>\n                                    </div>\n                                </div>`),(t=$(".floor-map-img-main")).lightGallery(),t.data("lightGallery").destroy(!0),t.lightGallery({thumbnail:!1})):(a+=`<li class="nav-item waves-effect waves-light">\n                                    <a class="nav-link" data-toggle="tab" href="#floor_plan${this.id}">${this.title}</a>\n                                </li>`,$("#property-modal .modal-body .row div .tab-content").append(`<div class="tab-pane h-100" id="floor_plan${this.id}">\n                                    <div class="floor-map-img-main">\n                                    <a href="/uploads/floors/${this.image}">\n                                        <img src="/uploads/floors/${this.image}" alt="">\n                                        <div class="middle">\n                                            <div class="text">View</div>\n                                        </div>\n                                        </a>\n                                    </div>\n                                </div>`),(t=$(".floor-map-img-main")).lightGallery(),t.data("lightGallery").destroy(!0),t.lightGallery({thumbnail:!1}))}),$("#property-modal .modal-body .row div ul").html(a),$("#hname").html("Selected Home<br><b>"+e.title+"</b>"),$("#property-modal .property-info p.home-price").html(formatter.format(e.price)),$("#property-modal .property-info p.bed").html(e.bed),$("#property-modal .property-info p.bath").html(e.bath),$("#property-modal .property-info p.garage").html(e.garg),$("#property-modal .property-info p.floor").html(e.floor),$("#property-modal .property-info p.area").html(areaFormatter.format(e.area)),$("#property-modal .modal-dialog.modal-notify.modal-info .modal-body h4 span.lot-no").html(e.linfo)}})}function step(e){"zoom-in"==e?(scale+=.25,$(".svg-draggable").css({transform:`scale(${scale})`})):scale>1&&(scale-=.25,$(".svg-draggable").css({transform:`scale(${scale})`}))}function dragElement(e){var t=0,a=0,o=0,n=0;function i(e){(e=e||window.event).preventDefault(),o=e.clientX,n=e.clientY,document.onmouseup=l,document.onmousemove=s}function s(i){(i=i||window.event).preventDefault(),t=o-i.clientX,a=n-i.clientY,o=i.clientX,n=i.clientY,e.style.top=e.offsetTop-a+"px",e.style.left=e.offsetLeft-t+"px"}function l(){document.onmouseup=null,document.onmousemove=null}document.getElementById(e.id+"header")?document.getElementById(e.id+"header").onmousedown=i:e.onmousedown=i}function getHomes(e,t,a){if($("#search-results").html('<p class="text-center text-white m-3"><img src="/images/white-loader.gif"></p>'),""==$("#continue_to_home").data("lid"))return $("#search-results").html('<p class="text-center text-white m-3">Please select the lot first</p>'),!1;$.ajax({url:"/api/filterhome",type:"post",dataType:"json",data:{lid:filter_lot_id,type:e,minv:t,maxv:a},headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(e){$("#search-results").html(e.html),$(".home-img").mouseenter(function(){$(this).find("span").addClass("show-buttons"),$(this).find("img").addClass("fade-img")}),$(".home-img").not(".home-img span").mouseleave(function(){$(this).find("span").removeClass("show-buttons"),$(this).find("img").removeClass("fade-img")})}})}$("#pb-elevation-type, #pb-elevation, #pb-community").addClass("active complete"),$(".progressbar li.complete span").html("done"),$("#pb-lot").addClass("active"),window.onload=function(){var e=$(".filter-tabs-main nav div a");$.each(e,function(){$(this).removeClass("waves-effect waves-light")})},showPopup(),loadSvg(),$(".refrest-btn").click(function(){counter+=180,$(".refrest-btn div").css("transform","rotate("+counter+"deg)"),resetColors(),showPopup(),dragElement(document.getElementById("stage")),$("#stage").animate({top:"0px",left:"0",bottom:"auto"}),$(".svg-draggable").css({transform:"scale(1)"}),scale=1,$.ajax({type:"get",url:"/api/refresh-lots",success:function(){$("#pb-lot").removeClass("complete"),$("#pb-lot span").html("place"),$("#continue_to_home").attr("data-lid",""),$("#generate_estimate").attr("data-lid",""),$("#slotp").html(""),$("#slot_id").val(""),$(".lot-no").html("$0")}})}),$(document).on("click",".check-home",function(){$(".check-home").removeClass("active"),$(this).addClass("active")}),dragElement(document.getElementById("stage")),$("#filter-price").ionRangeSlider({type:"double",min:minPrice,max:maxPrice,grid:!1,skin:"round",hide_min_max:!0,hide_from_to:!0,from:minPrice,to:maxPrice,onStart:function(e){$(".price_range_data").html(`${formatter.format(e.from)} - ${formatter.format(e.to)}`)},onChange:function(e){$(".price_range_data").html(`${formatter.format(e.from)} - ${formatter.format(e.to)}`)},onFinish:function(e){getHomes("price",e.from,e.to)}}),$("#filter-living-area").ionRangeSlider({type:"double",min:minArea,max:maxArea,grid:!1,skin:"round",hide_min_max:!0,hide_from_to:!0,from:minArea,to:maxArea,onStart:function(e){$(".living_area_range_data").html(`${areaFormatter.format(e.from)} sqft - ${areaFormatter.format(e.to)} sqft`)},onChange:function(e){$(".living_area_range_data").html(`${areaFormatter.format(e.from)} sqft - ${areaFormatter.format(e.to)} sqft`)},onFinish:function(e){getHomes("area",e.from,e.to)}}),$("#filter-beds").ionRangeSlider({type:"double",min:minBed,max:maxBed,grid:!1,skin:"round",hide_min_max:!0,hide_from_to:!0,from:minBed,to:maxBed,onStart:function(e){$(".beds_range_data").html(`${e.from} - ${e.to}`)},onChange:function(e){$(".beds_range_data").html(`${e.from} - ${e.to}`)},onFinish:function(e){getHomes("bedroom",e.from,e.to)}}),$("#filter-baths").ionRangeSlider({type:"double",min:minBath,max:maxBath,grid:!1,skin:"round",hide_min_max:!0,hide_from_to:!0,from:minBath,to:maxBath,onStart:function(e){$(".baths_range_data").html(`${e.from} - ${e.to}`)},onChange:function(e){$(".baths_range_data").html(`${e.from} - ${e.to}`)},onFinish:function(e){getHomes("bathroom",e.from,e.to)}}),$("#filter-garage").ionRangeSlider({type:"double",min:minGarage,max:maxGarage,grid:!1,skin:"round",hide_min_max:!0,hide_from_to:!0,from:minGarage,to:maxGarage,onStart:function(e){$(".garage_range_data").html(`${e.from} - ${e.to}`)},onChange:function(e){$(".garage_range_data").html(`${e.from} - ${e.to}`)},onFinish:function(e){getHomes("garage",e.from,e.to)}}),$("#filter-floors").ionRangeSlider({type:"double",min:minFloor,max:maxFloor,grid:!1,skin:"round",hide_min_max:!0,hide_from_to:!0,from:minFloor,to:maxFloor,onStart:function(e){$(".floors_range_data").html(`${e.from} - ${e.to}`)},onChange:function(e){$(".floors_range_data").html(`${e.from} - ${e.to}`)},onFinish:function(e){getHomes("floor",e.from,e.to)}}),$("#nav-tab2").on("shown.bs.tab",function(e){tabsCarousel.slick("unslick").slick({infinite:!0,speed:500,fade:!0,cssEase:"linear",dots:!1,arrows:!0,autoplay:!0,adaptiveHeight:!0}),e.target,e.relatedTarget}),$("#generate_estimate").click(function(){var e=$(this).attr("data-lid");$(this).attr("data-login");if(""==e)return toastr.info("Please select Lot to continue"),!1;1==auth?window.location.href=estimate:$("#exampleModal").modal("show")}),$("#continue_to_home").click(function(){if(""==$(this).attr("data-lid"))return toastr.info("Please select Lot to continue"),!1;window.location.href=xhome})}if("xhome"==currentRoute){$("#pb-elevation-type, #pb-elevation, #pb-community, #pb-lot").addClass("active complete"),$(".progressbar li.complete span").html("done"),$("#pb-color").addClass("active");var $carousel=$(".property-image");function elevationPopup(e){$("#property-loader").addClass("show-loader"),$("#property-modal .modal-body").removeClass("show-modal-body"),$("#property-modal").modal("show"),$.ajax({url:"/api/get-elevation",type:"post",dataType:"json",data:{hid:e},headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(e){$("#property-modal .modal-dialog.modal-notify.modal-info .modal-body h4").html(`${e.home.title}`),$("#hname").html("Selected Home<br><b>"+e.home.title+"</b>"),$("#property-modal .property-info p.home-price span").html(formatter.format(e.home.price)),$("#property-modal .property-info p.bed span").html(e.home.bedroom),$("#property-modal .property-info p.bath span").html(e.home.bathroom),$("#property-modal .property-info p.garage span").html(e.home.garage),$("#property-modal .property-info p.floor span").html(e.home.floor),$("#property-modal .property-info p.area span").html(areaFormatter.format(e.home.area)),$(".property-image").html(""),$.each(e.gallery,function(){$carousel.append(`<a href="/uploads/homes/${this}">\n                                            <img src="/uploads/homes/${this}"/>\n                                        </a>`),$carousel.lightGallery(),$carousel.data("lightGallery").destroy(!0),$carousel.lightGallery({thumbnail:!0,animateThumb:!1,showThumbByDefault:!1,mode:"lg-slide-circular"})}),$carousel.slick("slickRemove",null,null,!0),$carousel.slick("unslick").slick({infinite:!0,speed:500,fade:!0,cssEase:"linear",dots:!1,arrows:!0,autoplay:!0}),e.floor_data.length>0?$("#property-modal .modal-body .floor-tabs-wrapper").html('<ul class="nav nav-tabs border-bottom-0 \n                                                                                    justify-content-center">\n                                                                                    </ul>\n                                                                                    <div class="tab-content">\n                                                                                    </div>\n                                                                                '):$("#property-modal .modal-body .floor-tabs-wrapper").html('<div class="alert alert-info" role="alert">\n                                                                                Floor Plans Coming Soon!\n                                                                                </div>');var t="";$.each(e.floor_data,function(e){var a;0==e?(t+=`<li class="nav-item waves-effect waves-light">\n                                    <a class="nav-link active" data-toggle="tab" href="#floor_plan${this.id}">${this.title}</a>\n                                </li>`,$("#property-modal .modal-body .row div .tab-content").append(`<div class="tab-pane active h-100" id="floor_plan${this.id}">\n                                    <div class="floor-map-img-main">\n                                    <a href="/uploads/floors/${this.image}">\n                                        <img src="/uploads/floors/${this.image}" alt="">\n                                        <div class="middle">\n                                            <div class="text">View</div>\n                                        </div>\n                                        </a>\n                                    </div>\n                                </div>`),(a=$(".floor-map-img-main")).lightGallery(),a.data("lightGallery").destroy(!0),a.lightGallery({thumbnail:!1})):(t+=`<li class="nav-item waves-effect waves-light">\n                                    <a class="nav-link" data-toggle="tab" href="#floor_plan${this.id}">${this.title}</a>\n                                </li>`,$("#property-modal .modal-body .row div .tab-content").append(`<div class="tab-pane h-100" id="floor_plan${this.id}">\n                                    <div class="floor-map-img-main">\n                                    <a href="/uploads/floors/${this.image}">\n                                        <img src="/uploads/floors/${this.image}" alt="">\n                                        <div class="middle">\n                                            <div class="text">View</div>\n                                        </div>\n                                        </a>\n                                    </div>\n                                </div>`),(a=$(".floor-map-img-main")).lightGallery(),a.data("lightGallery").destroy(!0),a.lightGallery({thumbnail:!1}))}),$("#property-modal .modal-body .row div ul").html(t),$(".floor-map-img-main").on("onBeforeSlide.lg",function(e,t,a){$(".lg-outer").css("background-color","rgba(255,255,255,0.9)")})},complete:function(){$("#property-loader").removeClass("show-loader"),$("#property-modal .modal-body").addClass("show-modal-body")}})}function set_price_session(e,t,a){$.ajax({url:"/home/pricesession",method:"post",dataType:"html",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:{home_price:e,home_customization:t,home_upgrade_patches:a},success:function(e){JSON.parse(e)}})}$(".home-img").mouseenter(function(){$(this).find("span").addClass("show-buttons"),$(this).find("img").addClass("fade-img")}),$(".home-img").not(".home-img span").mouseleave(function(){$(this).find("span").removeClass("show-buttons"),$(this).find("img").removeClass("fade-img")}),$(".color-schemes").mouseenter(function(){$(this).find("span").addClass("show-buttons"),$(this).find("img").addClass("fade-img")}),$(".color-schemes").not(".color-schemes span").mouseleave(function(){$(this).find("span").removeClass("show-buttons"),$(this).find("img").removeClass("fade-img")}),$(".feature-wrap").mouseenter(function(){$(this).find("span").addClass("show-buttons"),$(this).find("img").addClass("fade-img")}),$(".feature-wrap").not(".feature-wrap span").mouseleave(function(){$(this).find("span").removeClass("show-buttons"),$(this).find("img").removeClass("fade-img")}),$(".clear-btn").click(function(){$("#msg").val(""),$.ajax({url:"/home/save-msg/",method:"post",dataType:"json",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:{msg:""},success:function(e){toastr.success("Your Message has been cleared.")}})}),$(".elevation").click(function(){$("#home-loading").show(),$("#nav3 #options").html(""),$(".elevation").removeClass("active"),$(this).addClass("active");var e=$(this).parent().prev().attr("src");$("#main_img").attr("src",e),$(".nav-link").removeClass("active"),$(".tab-pane").removeClass("active show"),$("#nav-tab3").addClass("active"),$("#nav3").addClass("active show");var t=$(this).attr("elevation_id"),a="/uploads/homes/";$.ajax({url:"/home/colorschemes",method:"post",dataType:"json",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:{home_id:t},success:function(e){""!=e.title?$(".home-title").text(`- ${e.title}`):$(".home-title").text(""),$("#continue_to_floor").attr("href",e.floor_link),$("#shome").html(e.title);var t='<div class="row pt-3 pb-0 m-0 w-100" style="padding-right:15px;">';$.each(e.data,function(e,o){t+=e%2==0?`<div class="col-6 pr-1 pl-0">\n                                        <a href="javascript:void(0)" class="" >\n                                        <div id="colorBox0" class="color-schemes">\n                                            <img class="img-fluid" width="100%" height="100%" src="${a}${this.img}" base_image="${a}${this.img}" alt="${this.title}" tabindex="0">\n                                            <span class="text-white">\n                                                <svg class="home-thumbnail" active="0" title="${this.title}" price="${this.price}" color_scheme_id="${this.id}" xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-check-circle"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg>\n                                            </span>\n                                        </div>\n                                        </a>\n                                        <div style="color:white;font-size:12px; margin-top:2px;margin-bottom:1px;">${this.title}</div>\n                                    </div>`:`<div class="col-6 pr-0 pl-1">\n                                        <a href="javascript:void(0)" class="" >\n                                        <div id="colorBox0" class="color-schemes">\n                                            <img class="img-fluid" width="100%" height="100%" src="${a}${this.img}" base_image="${a}${this.img}" alt="${this.title}" tabindex="0">\n                                            <span class="text-white">\n                                                <svg class="home-thumbnail" active="0" title="${this.title}" price="${this.price}" color_scheme_id="${this.id}" xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-check-circle"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg>\n                                            </span>\n                                        </div>\n                                        </a>\n                                        <div style="color:white;font-size:12px; margin-top:2px;margin-bottom:1px;">${this.title}</div>\n                                    </div>`}),t+="</div>",$("#base_images").html(t),$(".color-schemes").mouseenter(function(){$(this).find("span").addClass("show-buttons"),$(this).find("img").addClass("fade-img")}),$(".color-schemes").not(".color-schemes span").mouseleave(function(){$(this).find("span").removeClass("show-buttons"),$(this).find("img").removeClass("fade-img")}),$("#home-loading").hide(),$("#shmprice").text(`${formatter.format(e.price)}`),$("#amount").val(e.total_price),$("#amount_display").text(formatter.format(e.total_price)),$("#total_cost").text(e.total_price),$("#mort_color_scheme_price").html(""),$("#mort_upgrade_options").html(""),downrate(),calculatePayment()}}),$.ajax({url:"/api/get-elevation",type:"post",dataType:"json",data:{hid:t},headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(e){$("#property-modal .modal-dialog.modal-notify.modal-info .modal-body h4").html(`${e.home.title}`),$("#hname").html("Selected Home<br><b>"+e.home.title+"</b>"),$("#property-modal .property-info p.home-price span").html(formatter.format(e.home.price)),$("#property-modal .property-info p.bed span").html(e.home.bedroom),$("#property-modal .property-info p.bath span").html(e.home.bathroom),$("#property-modal .property-info p.garage span").html(e.home.garage),$("#property-modal .property-info p.floor span").html(e.home.floor),$("#property-modal .property-info p.area span").html(areaFormatter.format(e.home.area)),$(".property-image").html(""),$.each(e.gallery,function(){$carousel.append(`<a href="/uploads/homes/${this}">\n                                            <img src="/uploads/homes/${this}"/>\n                                        </a>`),$carousel.lightGallery(),$carousel.data("lightGallery").destroy(!0),$carousel.lightGallery({thumbnail:!0,animateThumb:!1,showThumbByDefault:!1,mode:"lg-slide-circular"})}),$carousel.slick("slickRemove",null,null,!0),$carousel.slick("unslick").slick({infinite:!0,speed:500,fade:!0,cssEase:"linear",dots:!1,arrows:!0,autoplay:!0}),e.floor_data.length>0?$("#property-modal .modal-body .floor-tabs-wrapper").html('<ul class="nav nav-tabs border-bottom-0 \n                                                                                justify-content-center">\n                                                                                </ul>\n                                                                                <div class="tab-content">\n                                                                                </div>\n                                                                                '):$("#property-modal .modal-body .floor-tabs-wrapper").html('<div class="alert alert-info" role="alert">\n                                                                                Floor Plans Coming Soon!\n                                                                                </div>');var t="";$.each(e.floor_data,function(e){var a;0==e?(t+=`<li class="nav-item waves-effect waves-light">\n                                    <a class="nav-link active" data-toggle="tab" href="#floor_plan${this.id}">${this.title}</a>\n                                </li>`,$("#property-modal .modal-body .row div .tab-content").append(`<div class="tab-pane active h-100" id="floor_plan${this.id}">\n                                    <div class="floor-map-img-main">\n                                    <a href="/uploads/floors/${this.image}">\n                                        <img src="/uploads/floors/${this.image}" alt="">\n                                        <div class="middle">\n                                            <div class="text">View</div>\n                                        </div>\n                                        </a>\n                                    </div>\n                                </div>`),(a=$(".floor-map-img-main")).lightGallery(),a.data("lightGallery").destroy(!0),a.lightGallery({thumbnail:!1})):(t+=`<li class="nav-item waves-effect waves-light">\n                                    <a class="nav-link" data-toggle="tab" href="#floor_plan${this.id}">${this.title}</a>\n                                </li>`,$("#property-modal .modal-body .row div .tab-content").append(`<div class="tab-pane h-100" id="floor_plan${this.id}">\n                                    <div class="floor-map-img-main">\n                                    <a href="/uploads/floors/${this.image}">\n                                        <img src="/uploads/floors/${this.image}" alt="">\n                                        <div class="middle">\n                                            <div class="text">View</div>\n                                        </div>\n                                        </a>\n                                    </div>\n                                </div>`),(a=$(".floor-map-img-main")).lightGallery(),a.data("lightGallery").destroy(!0),a.lightGallery({thumbnail:!1}))}),$("#property-modal .modal-body .row div ul").html(t),$(".floor-map-img-main").on("onBeforeSlide.lg",function(e,t,a){$(".lg-outer").css("background-color","rgba(255,255,255,0.9)")})}})}),$("#nav3").on("click",".home-thumbnail",function(){if(1==$(this).attr("active"))return!1;$("#new_data #mort_upgrade_options").html("");var e=$(this).attr("price"),t=$(this).attr("title");$("#mort_color_scheme_price").html('<div class="base-price">'+t+" <span>$"+e+"</span></div>"),$("#nav3 .home-thumbnail").attr("active",0),$(this).attr("active",1),$("#home-loading").show(),$("#nav3 .home-thumbnail").removeClass("active"),$(this).addClass("active"),$("#nav3 #options").html(""),$("#nav3 #manufacturer").html("");var a=$(this).parent().prev().attr("base_image");$("#main_img").attr("src",a);var o=$(this).attr("color_scheme_id"),n=$("#new_data").html();$.ajax({url:"/home/homefeatures",method:"post",dataType:"html",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:{color_scheme_id:o,color_scheme_price:e,home_customization:n},success:function(e){$("#home-loading").hide();var t=JSON.parse(e);$("#amount").val(t.total_cost),$("#amount_display").text(formatter.format(t.total_cost)),$("#total_cost").text(t.total_cost),downrate(),calculatePayment();var a="";$.each(t.data,function(e,t){var o=this.upgrade_type,n="";1==o&&(n="concrete"),2==o&&(n="window"),3==o&&(n="siding");var i=this.id;a+=`<ul class="col-4 pr-1 pl-0 mb-1">\n                            <a id="${n}" upgraded="${this.upgraded}">\n                                <div class="feature-wrap">\n                                <img class="w-100" id="img_${i}" upgrade_patch_id="" price="0" alt="${this.title}" src="/uploads/homes/${this.img}">\n                                <span class="text-white d-flex">\n                                    <svg class="feature" href="javascript:void(0)" upgrade_type="${n}" feature_id="${i}" stared="${this.stared}" upgraded="${this.upgraded}" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg>\n                                    ${0!=this.stared?'<svg upgrade="'+this.upgraded+'" feature_id="'+i+'" upgrade_type="'+n+'" class="upgrade_options ml-1" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-up-circle"><circle cx="12" cy="12" r="10"></circle><polyline points="16 12 12 8 8 12"></polyline><line x1="12" y1="16" x2="12" y2="8"></line></svg>':""}\n                                </span>\n                                ${0!=this.stared?'<p style="left: 0;right: 0;width: 100%;text-align: center;position: absolute;top: 2px;margin: 0; opacity:0; transition: 0.3s ease opacity;font-size: 11px;background: #FFE300;padding: 4px 5px;line-height: 1;"> Upgraded</p>':""}\n                                </div>\n                            </a>\n                            </ul>`}),$("#nav3 #options").html(a),$(".feature-wrap").mouseenter(function(){$(this).find("span").addClass("show-buttons"),$(this).find("img").addClass("fade-img")}),$(".feature-wrap").not(".feature-wrap span").mouseleave(function(){$(this).find("span").removeClass("show-buttons"),$(this).find("img").removeClass("fade-img")}),$(".upgrade_options").mouseenter(function(){1==$(this).attr("upgrade")?($(this).tooltip("dispose"),$(this).tooltip({title:"Downgrade",container:"body"}),$(this).tooltip("show")):($(this).tooltip("dispose"),$(this).tooltip({title:"Upgrade",container:"body"}),$(this).tooltip("show"))})}})}),$("#nav3").on("click",".feature",function(){$(".feature-wrapper").removeClass("show-feature"),$("#loader").addClass("show-loader"),$("#elevation-type-modal").modal("show");$(this).attr("upgraded");var e=$(this).attr("feature_id"),t=($(this).attr("upgrade_type"),$(this).attr("stared"),$(this).parent().prev().attr("upgrade_patch_id"));if(""!=t)e=t;$.ajax({url:"/home/homemanufacturer",method:"post",dataType:"json",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:{feature_id:e},success:function(e){$("#elevation-type-modal .modal-body .feature-image-wrapper img").attr("src",`/uploads/homes/${e.data.img}`),$("#elevation-type-modal .modal-body .f-material").html(e.data.material),$("#elevation-type-modal .modal-body .f-manufacturer").html(e.data.manufacturer),$("#elevation-type-modal .modal-body .f-name").html(e.data.name),$("#elevation-type-modal .modal-body .f-id").html(e.data.id)},complete:function(){$(".feature-wrapper").addClass("show-feature"),$("#loader").removeClass("show-loader")}})}),$("#nav3").on("click",".upgrade_options",function(){var e=$(this).attr("upgrade");0==e?(e=1,$(this).attr("title","Downgrade"),$(this).tooltip("dispose"),$(this).tooltip({title:"Downgrade",container:"body"}),$(this).tooltip("show"),$(this).parent().next().addClass("show-bookmark")):(e=0,$(this).attr("title","Upgrade"),$(this).tooltip("dispose"),$(this).tooltip({title:"Upgrade",container:"body"}),$(this).tooltip("show"),$(this).parent().next().removeClass("show-bookmark"));var t=$(this).attr("upgrade_type"),a=$("#nav3 #"+t).attr("upgraded");if(e==a)return!1;$("#home-loading").show(),$(this).toggleClass("rotate-upgrade");var o=$(this).attr("feature_id");$("#nav3 #"+t).attr("upgraded",e);var n,i,s;n=$("#window").attr("upgraded"),i=$("#concrete").attr("upgraded"),s=$("#siding").attr("upgraded");var l="";$(this).attr("upgrade",e);$.ajax({url:"/home/upgradefeatures",method:"post",dataType:"html",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:{feature_id:o,upgrade:e,upgrade_window:n,upgrade_concrete:i,upgrade_siding:s,total_cost:parseInt($("#total_cost").text())},success:function(t){var a=JSON.parse(t);$("#main_img").attr("src","/uploads/homes/"+a.data2.img),$("#nav3 #img_"+o).attr("src","/uploads/homes/"+a.data.img);var n=parseInt($("#total_cost").text());if(1==e){var i=parseInt(a.data.price);$("#nav3 #img_"+o).attr("price",i),$("#nav3 #img_"+o).attr("upgrade_patch_id",a.data.id),$(this).attr("price",i);var s=n+i}else{s=n-(i=$("#nav3 #img_"+o).attr("price"));$("#nav3 #img_"+o).attr("upgrade_patch_id",a.data.id)}var r=Math.round(s);$("#total_cost").text(r),$("#amount").val(r),$("#amount_display").text(formatter.format(r)),downrate(),calculatePayment(),$("#home-loading").hide();var d=new Array;$("#nav3 .feature").each(function(){if(1==$(this).parent().parent().parent().attr("upgraded")){d.push($(this).parent().prev().attr("upgrade_patch_id"));var e=Math.round(parseInt($(this).parent().prev().attr("price")));"concrete"==$(this).attr("upgrade_type")&&(l+='<div class="base-price">Concrete Upgrade<span>$'+e+"</span></div>"),"window"==$(this).attr("upgrade_type")&&(l+='<div class="base-price">Window Upgrade<span>$'+e+"</span></div>"),"siding"==$(this).attr("upgrade_type")&&(l+='<div class="base-price">Side Upgrade<span>$'+e+"</span></div>")}}),$("#mort_upgrade_options").html(l);var m=$("#new_data").html();set_price_session(r,m,d)}})}),$("#generate_estimate").click(function(){1==auth?window.location.href=estimate:$("#exampleModal").modal("show")}),$("#msg_save").click(function(e){var t=$("#msg").val();if(""==t)return!1;$.ajax({url:"/home/save_msg",method:"post",dataType:"json",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:{msg:t},success:function(e){toastr.success(e.data)}})}),$("#nav-tab1").on("shown.bs.tab",function(e){tabsCarousel.slick("unslick").slick({infinite:!0,speed:500,fade:!0,cssEase:"linear",dots:!1,arrows:!0,autoplay:!0,adaptiveHeight:!0}),e.target,e.relatedTarget})}if("xfloor"==currentRoute){$("#pb-elevation-type, #pb-elevation, #pb-community, #pb-lot, #pb-color").addClass("active complete"),$("#pb-floor").addClass("active"),$(".progressbar li.complete span").html("done");let e=1;counter=0;function step(t){"zoom-in"==t?(e+=.25,$(".floor_img").css({transform:`scale(${e})`})):e>1&&(e-=.25,$(".floor_img").css({transform:`scale(${e})`}))}function elevationPopup(){$("#property-modal").modal("show")}function final_finish(){$(document).find(".manageToggle").each(function(){if($(this).find("input").is(":checked")){let e='<input name="feature_id[]" type="hidden" value="'+$(this).attr("data-self")+'">';$(document).find("input[name='home_id']").after(e)}}),$(document).find("#finishPage_form").submit()}function updateemi(){var e=document.getElementById("amount").value;e=e.replace(/[|&;$%@"<>()+,]/g,"");var t=document.getElementById("term").value,a=document.getElementById("rate").value;t=t.match("y")?12*parseInt(t.replace(/[^\d.]/gi,""),10):parseInt(t.replace(/[^\d.]/gi,""),10);var o=document.getElementById("downpay_amt").value,n=e-(o=o.replace(/[|&;$%@"<>()+,]/g,"")),i=a/100/12,s=Math.pow(1+i,t),l=n*s*i/(s-1),r=Math.round(l);document.getElementById("payment").innerHTML="$"+r,document.getElementById("payments").innerHTML=r;var d=document.getElementById("downpay_amt").value;d=d.replace(/[|&;$%@"<>()+,]/g,"");var m=(l*t+parseInt(d)).toFixed(0);document.getElementById("paymentss").innerHTML=m}function downrate1(){var e=document.getElementById("amount").value,t=(e=e.replace(/[|&;$%@"<>()+,]/g,""))*document.getElementById("downpay_rate").value/100;t=Math.round(t);document.getElementById("downpay_amt").value=t}function downpayment1(){var e=document.getElementById("amount").value;e=e.replace(/[|&;$%@"<>()+,]/g,"");var t=document.getElementById("downpay_amt").value,a=100*(t=t.replace(/[|&;$%@"<>()+,]/g,""))/e;document.getElementById("downpay_rate").value=a}function checkPreChecked(){for(var e=JSON.parse(featuresData),t=1;t<=e.length;t++){!function(a){$.ajax({url:"/get-feature-data",type:"post",data:{featureid:e[t-1]},headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(e){e.length>0&&$.each(e,function(e,t){let o='<img src="'+t.image+'" class="ftImage" id="'+t.id+'">';$(document).find(".floor_image_view"+a).append(o)})}})}(t);for(let o=0;o<e[t-1].length;o++){var a=e[t-1][o];$('input[type="checkbox"]#'+a).trigger("click")}}}function set_price_session(e,t,a){$.ajax({url:"/floor/pricesession",method:"post",dataType:"html",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:{total_price:e,feature_id:a,floor_customization:t}})}function checkDependencyToggle(){$(document).find(".floor_options.active .manageToggle").each(function(){let e=$(this).attr("data-title"),t=$(this).attr("data-dependency")?JSON.parse($(this).attr("data-dependency")):[];for(var a=0;a<t.length;a++){let o=t[a];$(".dependency_"+o).prop("disabled",!0).next("i").addClass("disabled"),$(".dependency_"+o).parents("li").addClass("confilmsg").attr("data-tooltip",e+" must be selected")}let o=$(this).attr("data-togetherness")?JSON.parse($(this).attr("data-togetherness")):[];for(a=0;a<o.length;a++){let t=o[a];$(".togetherness_"+t).parents("li").addClass("confilmsg").attr("data-tooltip","Comes with "+e)}})}function hideConflicts(e){let t=$("label#ftlabel"+e),a=t.attr("data-conflicts")?JSON.parse(t.attr("data-conflicts")):[];t.attr("data-title");for(var o=0;o<a.length;o++){let e=a[o];$(".conflicts_"+e).prop("checked",!1),hideTogetherness(e)}}function showTogetherness(e){let t=$("label#ftlabel"+e),a=t.attr("data-togetherness")?JSON.parse(t.attr("data-togetherness")):[];for(var o=0;o<a.length;o++){let e=a[o];$(".togetherness_"+e).parents("li").removeClass("confilmsg").removeAttr("data-tooltip"),$(".togetherness_"+e).prop("checked",!0),hideConflicts(e),showDependency(e)}}function hideTogetherness(e){let t=$("label#ftlabel"+e),a=t.attr("data-togetherness")?JSON.parse(t.attr("data-togetherness")):[],o=t.attr("data-title");for(var n=0;n<a.length;n++){let e=a[n];$(".togetherness_"+e).prop("checked",!1),$(".togetherness_"+e).parents("li").addClass("confilmsg").attr("data-tooltip","Comes under "+o),hideDependency(e)}}function showDependency(e){let t=$("label#ftlabel"+e),a=t.attr("data-dependency")?JSON.parse(t.attr("data-dependency")):[];if(a.length>0)for(var o=0;o<a.length;o++){let e=a[o];$(".dependency_"+e).parents("li").removeClass("confilmsg").removeAttr("data-tooltip"),$(".dependency_"+e).prop("disabled",!1).next("i").removeClass("disabled")}}function hideDependency(e){let t=$("label#ftlabel"+e),a=t.attr("data-dependency")?JSON.parse(t.attr("data-dependency")):[],o=t.attr("data-title");if(a.length>0)for(var n=0;n<a.length;n++){let e=a[n];$(".dependency_"+e).prop("checked",!1).prop("disabled",!0).next("i").addClass("disabled"),$(".dependency_"+e).parents("li").addClass("confilmsg").attr("data-tooltip","Depends on "+o)}}function checkFinalAclSettings(){checkDependencyToggle();var e=[];if($(document).find(".floor_options.active .manageToggle").each(function(){if($(this).find("input").is(":checked")){let t=$(this).attr("data-self");e.push(t)}}),e.length>0)for(var t=0;t<e.length;t++){showDependency(e[t])}if(e.length>0)for(t=0;t<e.length;t++){showTogetherness(e[t])}if(e.length>0)for(t=0;t<e.length;t++){hideConflicts(e[t])}}function loadCheckFinalAclSettings(){checkDependencyToggle();var e=[];if($(document).find(".floor_options .manageToggle").each(function(){if($(this).find("input").is(":checked")){let t=$(this).attr("data-self");e.push(t)}}),e.length>0)for(var t=0;t<e.length;t++){showDependency(e[t])}if(e.length>0)for(t=0;t<e.length;t++){showTogetherness(e[t])}if(e.length>0)for(t=0;t<e.length;t++){hideConflicts(e[t])}}function preset_price_session(e,t,a){$.ajax({url:SITE_URL+"/floor/pricesession",method:"post",dataType:"html",data:{total_price:e,feature_id:a,floor_customization:t},headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(e){}})}function setupForTogetherness(e,t){var a=[];return e.length&&e.map(function(e){let o=e;$(".dependency_"+o).prop("disabled",!1),$(".dependency_"+o).prop("checked",t),$(".dependency_"+o).prop("disabled",!0).next("i").addClass("disabled"),a.push(o)}),a}function setupForDependency(e,t){var a=[];return e.length&&e.map(function(e){let o=e;$(".dependency_"+o).prop("disabled",!1),$(".dependency_"+o).prop("checked",t),$(".dependency_"+o).prop("disabled",!0).next("i").addClass("disabled"),a.push(o)}),a}function unique(e){var t=[];return $.each(e,function(e,a){-1==$.inArray(a,t)&&t.push(a)}),t}function dragElement(e){var t=0,a=0,o=0,n=0;function i(e){(e=e||window.event).preventDefault(),o=e.clientX,n=e.clientY,document.onmouseup=l,document.onmousemove=s}function s(i){(i=i||window.event).preventDefault(),t=o-i.clientX,a=n-i.clientY,o=i.clientX,n=i.clientY,e.style.top=e.offsetTop-a+"px",e.style.left=e.offsetLeft-t+"px"}function l(){document.onmouseup=null,document.onmousemove=null}document.getElementById(e.id)?document.getElementById(e.id).onmousedown=i:e.onmousedown=i}$(".xfloor-list span.fttl").on("mouseover",function(e){$(document).find(".overedimage").fadeOut(300).remove();var t=$(this).attr("data-self"),a=$(this).attr("data-image"),o=$(this).attr("data-conflicts"),n=$(".floorList.active").attr("floor_no");$('<img src="/uploads/features/'+a+'" id="'+t+'" class="overedimage">').hide().appendTo(".floor_image_view"+n).fadeIn(300);let i=o?JSON.parse(o):[];for(var s=0;s<i.length;s++){let e=i[s];$("img#"+e).addClass("d-none")}}),$(".xfloor-list span.fttl").on("mouseout",function(e){$(".floorList.active").attr("floor_no");$(document).find(".overedimage").fadeOut(300).remove(),$(".ftImage img").removeClass("d-none")}),$(".floorList").click(function(){$(".floor_img").fadeOut(),$(".floor_no"+$(this).attr("floor_no")).fadeIn()}),$(".checkbox").click(function(){var e=0,t=0,a=0,o=0,n="",i=0,s=totalPrice,l=new Array,r=$(".floorList.active").attr("floor_no"),d=floorCount;$(".checkbox").each(function(){if($(this).prop("checked")){var n=$(this).val();$(this).attr("title");n=n.replace(/[|&;$%@"<>()+,]/g,""),e+=parseInt(n),t=parseInt(s),o=a=t+e;var l=$("#term").val(),r=$("#rate").val(),d=$("#downpay_amt").val();d=d.replace(/[|&;$%@"<>()+,]/g,""),l=l.match("y")?12*parseInt(l.replace(/[^\d.]/gi,""),10):parseInt(l.replace(/[^\d.]/gi,""),10);var m=a-d,c=r/100/12,p=Math.pow(1+c,l),h=m*p*c/(p-1),f=Math.round(h);$("#payment").html("$"+f),$("#payments").html(f);var u=$("#downpay_amt").val();u=u.replace(/[|&;$%@"<>()+,]/g,"");var g=h*l+parseInt(u),v=Math.round(g);$("#paymentss").html(v),i=1}});for(var m=1;m<=d;m++){var c=new Array;$("#floor-tabs-"+m+" .checkbox").each(function(){if($(this).prop("checked")){var e=$(this).attr("id");c.push(e)}}),l.push(c)}r=$(".floorList.active").attr("floor_no");($(".floor_options.active .checkbox").each(function(){if($(this).prop("checked")){var e=$(this).val(),t=$(this).attr("title");e=e.replace(/[|&;$%@"<>()+,]/g,""),n+='<div class="base-price">'+t+" <span>$"+e+"</span></div>"}}),$("#floor_customization"+r).html(n),$("#floor_heading").show(),0==i)&&(o=parseInt(s));$("#total_costs").html(o),$("#amount").val(o),$("#amount_display").text(formatter.format(o)),downrate1(),l=JSON.stringify(l);var p=$("#floor_customization").html();set_price_session(o,p,l)}),$("#msg_save").click(function(){var e=$("#msg").val();if(""==e)return toastr.info("Please enter some note in your message"),!1;$.ajax({url:"/floor/save-msg/",method:"post",dataType:"json",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:{msg:e},success:function(e){toastr.success(e.data)}})}),$(".clear-btn").click(function(){$("#msg").val(""),$.ajax({url:"/floor/save-msg/",method:"post",dataType:"json",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:{msg:""},success:function(e){toastr.success("Your Message has been cleared.")}})}),$(".refrest-btn").click(function(){counter+=180,$(".refrest-btn div").css("transform","rotate("+counter+"deg)"),$(".floor_img").css("transform","scale(1)"),$(".floor_img").css({left:"0",top:"0"}),e=1}),$("#nav-tab3").on("shown.bs.tab",function(e){$(".elevation-home-img").fadeOut(function(){$(".floor-plan-img").fadeIn()}),e.target,e.relatedTarget}),$("#nav-tab2").on("shown.bs.tab",function(e){$(".floor-plan-img").fadeOut(function(){$(".elevation-home-img").fadeIn()}),e.target,e.relatedTarget}),$(".home-img").mouseenter(function(){$(this).find("span").addClass("show-buttons"),$(this).find("img").addClass("fade-img")}),$(".home-img").not(".home-img span").mouseleave(function(){$(this).find("span").removeClass("show-buttons"),$(this).find("img").removeClass("fade-img")}),$("#nav-tab1").on("shown.bs.tab",function(e){tabsCarousel.slick("unslick").slick({infinite:!0,speed:500,fade:!0,cssEase:"linear",dots:!1,arrows:!0,autoplay:!0,adaptiveHeight:!0}),e.target,e.relatedTarget}),$("#property-modal").on("show.bs.modal",function(){propertyModalCarousel.slick("unslick").slick({infinite:!0,speed:500,fade:!0,cssEase:"linear",dots:!1,arrows:!0,autoplay:!0})}),localStorage.setItem("home_id",1),localStorage.setItem("floor_id",1),localStorage.setItem("feature_id",1),loadCheckFinalAclSettings(),$(document).on("click",".home_list",function(e){let t=$(this).attr("id");$("input[name='home_id']").val(t),localStorage.setItem("home_id",t);$(this).attr("data-home-id");$(document).find(".floor_image_view").addClass("disp_none"),$(document).find(".home_image_full").each(function(e,a){$(a).attr("id")===t?$(a).removeClass("disp_none"):$(a).addClass("disp_none")}),$(document).find(".home_image_title").each(function(e,a){$(a).attr("id")===t?$(a).removeClass("disp_none"):$(a).addClass("disp_none")}),$(document).find(".home_image_footer").each(function(e,a){$(a).attr("id")===t?$(a).removeClass("disp_none"):$(a).addClass("disp_none")}),$(document).find(".home_floors").each(function(e,a){$(a).attr("data-floor-home-id")===t?$(a).removeClass("disp_none"):$(a).addClass("disp_none")})}),$(document).on("click",".tabDiv",function(e){let t=$(this).attr("id");if($(document).find(".tabDivSection").each(function(e,a){$(a).attr("id")===t?$(a).removeClass("disp_none"):$(a).addClass("disp_none")}),"floor"==t)$(".floorList:first").click();else{$(document).find(".floor_image_view").addClass("disp_none");let e=localStorage.getItem("home_id");$(document).find(".home_image_full").each(function(t,a){$(a).attr("id")===e?$(a).removeClass("disp_none"):$(a).addClass("disp_none")})}}),$(document).on("click",".downloadPDFBtn",function(e){$(document).find("#pdf_form").submit()}),$(document).on("click",".reset-btn",function(e){$('input[type="checkbox"]:checked').prop("checked",!1),$(document).find(".ftImage").remove();var t=$("#prehomecost").val();$("#total_costs").html(t),$("#amount").val(t),$("#amount_display").text(t),$("#floor_customization").html(""),$("li.xfloor-list").removeClass("confilmsg").removeAttr("data-tooltip"),loadCheckFinalAclSettings(),preset_price_session(t)}),$(document).on("change",".floor_options.active .manageToggle",function(e){let t=$(this).attr("data-self");$("input#"+t).is(":checked")?(hideConflicts(t),showTogetherness(t),showDependency(t),checkFinalAclSettings()):(hideTogetherness(t),hideDependency(t),checkFinalAclSettings());var a=[];$(document).find(".floor_options.active .manageToggle").each(function(){if($(this).find("input").is(":checked")){let e=$(this).find("input").attr("id");a.push(e)}}),$.ajax({url:app_base_url+"/get-feature-data",type:"post",data:{featureid:a},headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},beforeSend:function(){$("#preloader").show()},complete:function(){$("#preloader").hide()},success:function(e){var t=$(".floorList.active").attr("floor_no");$(document).find(".floor_image_view"+t+" .ftImage").remove(),e.length>0&&$.each(e,function(e,a){let o='<img src="'+a.image+'" id="'+a.id+'" class="ftImage">';$(document).find(".floor_image_view"+t).append(o)})}})}),$(".floor_img").mouseenter(function(){var e=$(this).attr("id");dragElement(document.getElementById(e))})}